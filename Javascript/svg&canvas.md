# SVG 和 Canvas的特性与选择

> 很多人往往把Canvas的功能过于夸大了，可能提到绘图相关的功能立刻就想到了Canvas，甚至会认为Canvas会取代SVG，这种观点未免过于片面了。其实SVG和Canvas各有千秋，两者都可以完成对方不能完成的动画，并且将会长时间共存。

## SVG
SVG存在的历史（2003）要比Canvas久远，已经有十几年了，不仅现在的浏览器都支持，很多主流的系统也都支持。

1. SVG 是一种使用 XML 描述 2D 矢量图形的语言。（因为是矢量图形，不会失真，所以不依赖于分辨率，典型用处是在项目中常用来做icon，也适合用来做地图）

2. SVG 基于 XML，这意味着 SVG DOM 中的每个元素都是可用的。您可以为某个元素附加 JavaScript 事件处理器。
（因为支持事件处理器，故天生就有很强的交互能力。但这种界限也在被一些js库打破，使用Canvas也能较容易的实现交互功能了。）

3. 在 SVG 中，每个被绘制的图形均被视为对象。如果 SVG 对象的属性发生变化，那么浏览器能够自动重现图形。（Canvas则要手动处理重绘）

4. 复杂度高时，渲染性能较低。（复杂度体现在两个方面，一是DOM过多，二是DOM操作过于频繁，任何过度使用DOM的应用性能都不高）

5. 不适合复杂的游戏应用。

## Canvas

1. Canvas 通过 JavaScript 来绘制 2D 图形。（大数据量时绘图效率高）

2. Canvas 是逐像素进行渲染的。（依赖于分辨率。渲染同一个对象,分辨率越高，需要绘制更多的像素，canvas效率越低。节点越多，svg效率越低。）

3. 在 Canvas 中，一旦图形被绘制完成，它就不会继续得到浏览器的关注。绘制过的图形不支持事件处理器。
如果其位置发生变化，那么整个场景也需要重新绘制，包括任何或许已被图形覆盖的对象。
（原生的API相较于SVG，交互能力要弱）

4. 能够以.png 或 .jpg 格式保存结果图像。


## 总结
大多数场景下，SVG和Canvas都可以达到几乎相同的结果，具有完全重复的功能，重要的是要根据特定的场景。
从某种意义上来说两种技术之间的本质区别是Canvas处理像素，而SVG处理文档对象模型 (DOM)。

通常情况下，我认为这两种技术的选型依据归类如下：

### SVG：
- 对性能要求不苛刻，或者图形不多或者注重交互但交互频率不是很高的场景
- 高保真度复杂矢量文档一直是并将继续成为SVG的最佳选择。（生物图，地图，CAD图等）
- 当内容是简单图像或者可能需要被缩放使用的图像。（如icon）

### Canvas：
- 像素操纵，快速绘图，而无需保留此信息
- 非交互式实时数据可视化

### 两者均可的场景
- 图表
- 简单二维游戏

### 根据平台和交互做技术选型

| 场景               | 选择                      |
| ------------------ | ------------------------- |
| PC端强交互少元素   | SVG                       |
| PC端弱交互而强性能 | Canvas                    |
| PC端超强性能       | WebGL-Canvas              |
| 移动端弱交互       | 原生Canvas                |
| 移动端强交互       | Canvas(fabric.js/zRender) |



> 有时，开发人员的知识，技能和现有的资源在技术选择中起着重要作用。  
> 如果开发人员对底层图形API有很深的了解，并且对Web技术的了解有限，那么可能选择的技术是Canvas。  
> 反之亦然。

## WebGL
WebGL 是以 OpenGL ES 2.0 为基础的一套 浏览器 3D图形API （HTML5），在编程概念上与OpenGL ES 2.0 几乎是完全通用的，
同样采用可编程渲染管线，也就是每个顶点的处理受到一小段Vertex Shader代码的控制，
每个像素的绘制过程也受到一小段Fragment Shader代码的控制。
WebGL主要是3D为主， 不过2D的绘图要求也可以变通来实现。

WebGL 无论如何都需要一个显示对象来呈现，这个对象就是 Canvas，仅此而已，WebGL不对Canvas有任何附加的操作API， 那部分属于浏览器js支持的范畴。

WebGL 也继承 OpenGL ES 2.0 的兼容性支持能力， 在不同的设备上做有限的支持，需要运行时查询。

Three.js、Babylon.js、Blender4Web等是几种知名的 WebGL 开发框架，对 WebGL 基础操作做了大量的封装，可以拿来就用， 即使不了解 WebGL规范的细节。


<br/>
<br/>

> \[参考\]: [SVG vs Canvas: how to choose](https://docs.microsoft.com/en-us/previous-versions/windows/internet-explorer/ie-developer/samples/gg193983(v=vs.85)?redirectedfrom=MSDN#introduction)
